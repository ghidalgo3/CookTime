<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Cumulative update | CookTime Blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Cumulative update" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Almost 2 weeks without a blog post, lots of things have gotten done. Get ready!" />
<meta property="og:description" content="Almost 2 weeks without a blog post, lots of things have gotten done. Get ready!" />
<link rel="canonical" href="https://letscooktime.com/Blog/2022/05/15/cumulative-update.html" />
<meta property="og:url" content="https://letscooktime.com/Blog/2022/05/15/cumulative-update.html" />
<meta property="og:site_name" content="CookTime Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-05-15T00:36:58-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Cumulative update" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-05-15T00:36:58-04:00","datePublished":"2022-05-15T00:36:58-04:00","description":"Almost 2 weeks without a blog post, lots of things have gotten done. Get ready!","headline":"Cumulative update","mainEntityOfPage":{"@type":"WebPage","@id":"https://letscooktime.com/Blog/2022/05/15/cumulative-update.html"},"url":"https://letscooktime.com/Blog/2022/05/15/cumulative-update.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/Blog/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://letscooktime.com/Blog/feed.xml" title="CookTime Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/Blog/">CookTime Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Blog/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Cumulative update</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-05-15T00:36:58-04:00" itemprop="datePublished">May 15, 2022
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Almost 2 weeks without a blog post, lots of things have gotten done.
Get ready!</p>

<h1 id="new-recipes">New recipes</h1>
<p>Any recipe created in the last week will be shown in the <code class="language-plaintext highlighter-rouge">New Recipes</code> list of the home page.
Usually these recipes are “in-development” so showing them first makes the author’s job easier.</p>

<h1 id="feature-recipes">Feature recipes</h1>
<p>For the featured recipes lists, we query our recipe database for recipes with photos, take <code class="language-plaintext highlighter-rouge">N</code> of them, and then display them on the page.
It is preferable to ask the database to randomly sort and take the top <code class="language-plaintext highlighter-rouge">N</code> recipes after sorting, otherwise we have to load all the recipes client-side, randomize, and take <code class="language-plaintext highlighter-rouge">N</code> of them.
This can take an unnacceptable amount of time if the number of recipes is large.
CookTime uses PostgreSQL as its database, Entity Framework as the ORM, and the npsql as the bridge between LINQ queries and PostgreSQL statements. 
PostgreSQL can certainl do what we want, I found a stack overflow question asking for exactly this: https://stackoverflow.com/questions/654906/linq-to-entities-random-order</p>

<p>The only missing piece was to enable an extension on the database to allow it to generate UUIDs on-demand to create random sort orders. The query-command is this:</p>

<p><code class="language-plaintext highlighter-rouge">CREATE EXTENSION IF NOT EXISTS "uuid-ossp";</code></p>

<p>With all that database infrastructure in place, we now show featured recipes on the home page :).</p>

<h1 id="pagination">Pagination</h1>
<p>The home page and query results are now paginated.
This should reduce the amount of scrolling needed on mobile devices to view recipes.
We observed that users get lost if the page is too long to scroll through; pages should address this issue.</p>

<h1 id="ratings-and-reviews">Ratings and Reviews</h1>
<p>If you have a CookTime account, you can now rate and review recipes.
Your ratings will be aggregated and averaged.
Over time, we will come to find which recipes are the best recipes :)</p>

<h1 id="authentication-improvements">Authentication improvements</h1>
<p>You can now use your email OR your username to sign in to CookTime.
We now also display validation errors during the sign up process.
We have simplified the password requirements, basically you need atleast 2 unique characters and a minimum length of 6 total characters.</p>

<h1 id="categories-in-the-navigation-bar">Categories in the navigation bar</h1>
<p>During user testing, we found that users wanted to know what were all of the categories of reicpes that CookTime had recipes for.
We did not have a way to view the list of categories, but now we do!
You can click on <code class="language-plaintext highlighter-rouge">Categories</code> in the navigation bar and then click on a category you’re interested in to view all recieps for that category.</p>

<h1 id="ingredient-aliases">Ingredient aliases</h1>
<p>This feature is not user-facing but it did involve a big change in our backend so I’d like to describe it.</p>

<p>Early in CookTime’s development we identified a need for ingredient aliases.
For example, “milk” and “whole milk” are practically the same ingredient, so for the purposes of auto-completion and building a correct recipe database we should treat them as the same ingredient.
Initially this was <em>not</em> the case, recipes with “milk” and “whole milk” would be referencing unique ingredients and this would create several kinds of problems for us.</p>

<p>We could not associate different variants of an ingredient name with unique nutrition facts.</p>

<p>We could not properly highlight ingredient names in the recipe text if the user used one name in the ingredients list but another name in the text.
This is extremely common: for example you might say a recipe need 6 galic cloves but then in the text of the recipe you will write “peel the garlic.”
Since you did not write exactly “garlic clove”, we would not highlight the ingredient and thats not a good user experience.</p>

<p>Another problem was that we have a power user that creates recipes in portuguese so we had to associate the portuguese words for milk if we wanted nutrition facts and all the other features to work.</p>

<p>To implement aliases, we basically store a list of names for an ingredient along with a single “canonical” name.
In the case of milk, this looks like:
<code class="language-plaintext highlighter-rouge">Milk; Leite; Whole Milk</code>
Where <code class="language-plaintext highlighter-rouge">Milk</code> is the canonical name, and <code class="language-plaintext highlighter-rouge">Leite</code> (milk in portugues) and <code class="language-plaintext highlighter-rouge">Whole Milk</code> are aliases for this ingredient.</p>

<p>The bulk of the work of this change was to hide from the user the fact that an ingredient’s name is now a semi-colon separated list of possible aliases.</p>

  </div><a class="u-url" href="/Blog/2022/05/15/cumulative-update.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/Blog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">CookTime Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">CookTime Blog</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>CookTime Blog</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
