import{r as c,j as e,w as h}from"./chunk-EPOLDU6W-43oXRp_d.js";import{E as p}from"./CookTime.service-DGqb8wqN.js";import{u as m}from"./useTitle-Da5jpf3t.js";function u(i){const{replacedId:s,name:r,usage:t,keptId:o}=i,[n,l]=c.useState(i);return e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:s}),e.jsx("th",{children:r}),e.jsx("th",{children:t}),e.jsx("th",{children:e.jsx("input",{type:"text",name:"replacementId",placeholder:"Replace for (ID)",onChange:a=>l({...n,keptId:s,replacedId:a.target.value}),value:n.keptId===p?"":n.replacedId})}),e.jsxs("th",{children:[e.jsx("input",{type:"hidden",name:"ingredientId",value:"@ingredient.Id"}),e.jsx("button",{className:"btn btn-outline-success width-100",onClick:async a=>{(await fetch("/api/ingredient/replace",{method:"post",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})).ok&&location.reload()},type:"submit",children:"Replace"}),t===0&&e.jsx("button",{className:"btn btn-outline-success width-100",type:"submit",onClick:async a=>{(await fetch(`/api/ingredient/${s}`,{method:"delete"})).ok&&location.reload()},children:"Delete"})]})]})}const g=h(function(){const[s,r]=c.useState([]);return c.useEffect(()=>{async function t(){const n=await(await fetch("/api/ingredient/normalized")).json();r(n)}t()},[]),m("Ingredient Normalizer"),e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Ingredients"}),e.jsx("h2",{children:"How to use"}),e.jsx("p",{children:'When you find an ingredient that should be replace with another one, copy the ID of the ingredient "to remove" and paste it in the text field of the ingredient "to keep".'}),e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"ID"}),e.jsx("th",{scope:"col",children:"Ingredient names"}),e.jsx("th",{scope:"col",children:"Recipes using"}),e.jsx("th",{scope:"col",children:"Replace with"}),e.jsx("th",{scope:"col",children:"Save/Delete"})]})}),e.jsx("tbody",{children:s?.map((t,o)=>e.jsx(u,{...t},o))})]})]})});export{g as default};
