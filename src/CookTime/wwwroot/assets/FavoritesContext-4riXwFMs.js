import{r as t,j as d}from"./chunk-EPOLDU6W-43oXRp_d.js";import{a as w,r as S,g}from"./CookTime.service-DGqb8wqN.js";import{u as x}from"./AuthenticationContext-B1R-ZdmL.js";const v=t.createContext({favoriteIds:new Set,isFavorite:()=>!1,addToFavorites:async()=>{},removeFromFavorites:async()=>{},toggleFavorite:async()=>{},loading:!0});function b(){return t.useContext(v)}function h({children:F}){const[o,a]=t.useState(new Set),[l,n]=t.useState(!0),{user:u}=x();t.useEffect(()=>{async function e(){if(!u){a(new Set),n(!1);return}try{const s=await g("Favorites");s?.recipes?a(new Set(s.recipes.map(r=>r.id))):a(new Set)}catch{a(new Set)}n(!1)}n(!0),e()},[u]);const f=t.useCallback(e=>o.has(e),[o]),i=t.useCallback(async e=>{await w(e),a(s=>new Set([...s,e]))},[]),c=t.useCallback(async e=>{await S(e),a(s=>{const r=new Set(s);return r.delete(e),r})},[]),m=t.useCallback(async e=>{o.has(e)?await c(e):await i(e)},[o,i,c]);return d.jsx(v.Provider,{value:{favoriteIds:o,isFavorite:f,addToFavorites:i,removeFromFavorites:c,toggleFavorite:m,loading:l},children:F})}export{h as F,b as u};
