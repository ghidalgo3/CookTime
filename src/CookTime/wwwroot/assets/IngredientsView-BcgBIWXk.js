import{r as i,j as e,w as m}from"./chunk-EPOLDU6W-43oXRp_d.js";import{S as j}from"./Spinner-Bc6SJCTR.js";import{b}from"./CookTime.service-DGqb8wqN.js";import{u as N}from"./useTitle-Da5jpf3t.js";import"./ThemeProvider-CkrZYoIe.js";function f(c){const{ingredientId:a,ingredientNames:d,gtinUpc:r,ndbNumber:o,countRegex:I,expectedUnitMass:v,nutritionDescription:h}=c,[t,s]=i.useState(c),[x,u]=i.useState(!1),[g,p]=i.useState(!1);return e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:a}),e.jsx("th",{children:e.jsx("input",{type:"text",name:"ingredientNames",placeholder:"Cooktime ingredient name (semi-colon separated)",onChange:n=>s({...t,ingredientNames:n.target.value}),value:t.ingredientNames})}),e.jsx("th",{scope:"row",children:h}),e.jsxs("th",{children:[e.jsx("input",{type:"number",name:"ndbNumber",placeholder:"NDB Number",onChange:n=>s({...t,ndbNumber:Number.parseInt(n.target.value)}),value:t.ndbNumber===0?"":t.ndbNumber}),e.jsx("input",{type:"text",name:"gtinUpc",placeholder:"GTIN/UPC Number",onChange:n=>s({...t,gtinUpc:n.target.value}),value:t.gtinUpc})]}),e.jsx("th",{children:e.jsx("input",{type:"text",name:"countRegex",onChange:n=>s({...t,countRegex:n.target.value}),placeholder:"Count RegEx",value:t.countRegex})}),e.jsx("th",{children:e.jsx("input",{type:"text",name:"expectedUnitMass",onChange:n=>{let l=Number.parseFloat(n.target.value);n.target.value==="0."?s({...t,expectedUnitMass:"0."}):(isNaN(l)&&(l=.1),s({...t,expectedUnitMass:l.toString()}))},value:t.expectedUnitMass})}),e.jsxs("th",{children:[e.jsx("input",{type:"hidden",name:"ingredientId",value:a}),x?e.jsx(j,{}):e.jsx("button",{className:"btn btn-outline-success width-100",type:"submit",onClick:async()=>{u(!0);var n=await fetch("/api/ingredient/internalupdate",{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});u(!1),n.ok?(s(await n.json()),p(!1)):p(!0)},children:g?"Failed":"Save"})]})]})}const R=m(function(){const[a,d]=i.useState([]);return i.useEffect(()=>{async function r(){const o=await b();d(o)}r()},[]),N("Ingredients View"),e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Ingredients"}),e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"ID"}),e.jsx("th",{scope:"col",children:"Ingredient names"}),e.jsx("th",{scope:"col",children:"Nutrition description"}),e.jsx("th",{scope:"col",children:"NDB/GTIN/UPC Number"}),e.jsx("th",{scope:"col",children:"Count RegEx"}),e.jsx("th",{scope:"col",children:"Unit mass (kg)"}),e.jsx("th",{scope:"col",children:"Save/Delete"})]})}),e.jsx("tbody",{children:a.map((r,o)=>e.jsx(f,{...r},o))})]})]})});export{R as default};
