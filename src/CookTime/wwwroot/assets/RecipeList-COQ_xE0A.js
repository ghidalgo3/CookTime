import{r as x,j as e,L as b,u as k}from"./chunk-EPOLDU6W-43oXRp_d.js";import{M as A}from"./index-MnCcLIiK.js";/* empty css                      */import{i as B}from"./index-Dd5FJs2U.js";import{u as R}from"./AuthenticationContext-B1R-ZdmL.js";import{u as $}from"./FavoritesContext-4riXwFMs.js";import{C as y}from"./Card-YjBlU5Fj.js";import{S as L}from"./Stack-CK4X97tz.js";import{B as E,R as C,C as v}from"./Row-Ce-ZerzP.js";import{S as M}from"./Spinner-Bc6SJCTR.js";import{t as f,c as T,d as V,e as D,f as O,h as U}from"./CookTime.service-DGqb8wqN.js";import{c as F,u as z}from"./ThemeProvider-CkrZYoIe.js";import{A as Q}from"./Anchor-CH68qDnb.js";const w=x.forwardRef(({active:a=!1,disabled:s=!1,className:n,style:d,activeLabel:i="(current)",children:t,linkStyle:o,linkClassName:u,as:r=Q,...g},m)=>{const c=a||s?"span":r;return e.jsx("li",{ref:m,style:d,className:F(n,"page-item",{active:a,disabled:s}),children:e.jsxs(c,{className:F("page-link",u),style:o,...g,children:[t,a&&i&&e.jsx("span",{className:"visually-hidden",children:i})]})})});w.displayName="PageItem";function h(a,s,n=a){const d=x.forwardRef(({children:i,...t},o)=>e.jsxs(w,{...t,ref:o,children:[e.jsx("span",{"aria-hidden":"true",children:i||s}),e.jsx("span",{className:"visually-hidden",children:n})]}));return d.displayName=a,d}const W=h("First","«"),G=h("Prev","‹","Previous"),H=h("Ellipsis","…","More"),J=h("Next","›"),K=h("Last","»"),I=x.forwardRef(({bsPrefix:a,className:s,size:n,...d},i)=>{const t=z(a,"pagination");return e.jsx("ul",{ref:i,...d,className:F(s,t,n&&`${t}-${n}`)})});I.displayName="Pagination";const j=Object.assign(I,{First:W,Prev:G,Ellipsis:H,Item:w,Next:J,Last:K});function X({categories:a,id:s,name:n,averageReviews:d,reviewCount:i,images:t}){const{user:o}=R(),{isFavorite:u,toggleFavorite:r}=$(),g=u(s);function m(){const[p,P]=x.useState(!1);var N="";g?N="bi bi-heart-fill fs-4":N="bi bi-heart fs-4";const S=async()=>{P(!0),await r(s),P(!1)};return e.jsx(e.Fragment,{children:e.jsx(E,{disabled:p,onClick:S,type:"submit",className:"favorite-button",children:p?e.jsx(M,{as:"span",animation:"border",role:"status","aria-hidden":"true"}):e.jsx("i",{className:N})})})}function c(){let p=t.length===0||!t[0].url?B.placeholder:t[0].url;return e.jsxs("div",{className:"cr-image-parent",children:[e.jsx(b,{to:`/Recipes/Details?id=${s}`,children:e.jsx("img",{loading:"lazy",className:"card-img-top card-recipe-image",src:p,alt:"Food"})}),o&&e.jsx(m,{})]})}function l(){return e.jsx("div",{className:"height-32 margin-top-8",children:i>0?e.jsxs(L,{direction:"horizontal",children:[e.jsx(A,{value:d,className:"card-ratings",readOnly:!0})," ","   "," (",i,")"]}):e.jsx("div",{className:"card-ratings"})})}return e.jsx(e.Fragment,{children:e.jsxs(y,{className:"recipe-card margin-bottom-20",children:[e.jsx(c,{}),e.jsxs(y.Body,{children:[e.jsx("p",{className:"tag-style do-not-overflow-text margin-bottom-0",children:a.length?a.join(", "):"Recipe"}),e.jsx(y.Title,{className:"do-not-overflow-text",children:e.jsx(b,{to:`/recipes/details?id=${s}`,children:n})}),e.jsx(l,{})]})]})})}function Y(){return e.jsxs("div",{children:[e.jsx("script",{async:!0,src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6004231239349931",crossOrigin:"anonymous"}),e.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-format":"fluid","data-ad-layout-key":"-6t+d5-27+4v+al","data-ad-client":"ca-pub-6004231239349931","data-ad-slot":"7056881482"}),e.jsxs("script",{children:["(adsbygoogle = window.adsbygoogle || []).push(",");"]})]})}function Z(a){const{items:s,element:n,colClassName:d}=a,[i,t]=k(),o=Number.parseInt(i.get("page")??"1");function u(c){const l=new URLSearchParams(i.toString());return l.set("page",c===0?"":encodeURIComponent(c)),l}function r(c){t(u(c))}let g=(c,l)=>l===a.inFeedAdIndex?e.jsx(Y,{}):n(c);var m=s.results;return a.inFeedAdIndex&&m.length>0&&a.inFeedAdIndex<m.length&&(m=[...m.slice(0,a.inFeedAdIndex),null,...m.slice(a.inFeedAdIndex)]),e.jsxs(e.Fragment,{children:[e.jsx(C,{children:m.map((c,l)=>e.jsx(v,{sm:"4",className:d,children:g(c,l)},l))}),s.pageCount>1&&e.jsxs(j,{className:"justify-content-center",children:[o>1&&e.jsxs(e.Fragment,{children:[e.jsx("a",{style:{display:"none"},href:`/?${u(o-1).toString()}`,children:"Crawling link"}),e.jsx(j.Prev,{onClick:()=>r(o-1),children:"Previous"})]}),Array.from({length:s.pageCount},(c,l)=>e.jsx(j.Item,{active:l+1===o,style:{color:"black"},onClick:()=>{r(l+1)},children:l+1},l)),o<s.pageCount&&e.jsxs(e.Fragment,{children:[e.jsx("a",{style:{display:"none"},href:`/?${u(o+1).toString()}`,children:"Crawling link"}),e.jsx(j.Next,{onClick:()=>{r(o+1)},children:"Next"})]})]})]})}function me({title:a,query:s,type:n,hideIfEmpty:d}){const[i,t]=x.useState(f([]));x.useEffect(()=>{async function u(){if(n==="Featured"){const r=await T();t(f(r))}else if(n==="New"){const r=await V();t(f(r))}else if(n==="Query"){const r=s?.get("page")??"",g=s?.get("search")??"",m=await D({search:g,page:Number.parseInt(r)});t(m)}else if(n==="Favorites"){const r=await O();t(f(r))}else if(n==="Mine"){const r=s?.get("page")??"1",g=await U({page:Number.parseInt(r)});t(g)}}u()},[s,n]);const{user:o}=R();return d&&(i===null||i.results.length===0)?null:e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsx(v,{xs:10,children:e.jsx("h1",{children:a})}),o&&e.jsx(v,{className:"margin-bottom-20 text-end",xs:2,children:e.jsx(b,{to:"/Recipes/Create",children:e.jsx("i",{className:"bi bi-plus-circle themePrimary-color fs-3"})})})]}),e.jsx(Z,{element:u=>e.jsx(X,{...u}),inFeedAdIndex:4,items:i})]})}export{me as R};
