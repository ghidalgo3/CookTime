import{w as C,a as S,r as c,j as e}from"./chunk-EPOLDU6W-43oXRp_d.js";import{l as R,m as b}from"./CookTime.service-DGqb8wqN.js";import{P as u}from"./Recipe-mxaqZ7u9.js";import{u as N}from"./useTitle-Da5jpf3t.js";import{C as y}from"./Container-GPxFZ03o.js";import{R as I,C as T,B as d}from"./Row-Ce-ZerzP.js";import{F as r}from"./Form-DuBjGd-t.js";import{S as f}from"./Spinner-Bc6SJCTR.js";const W="Recipes/Create",q=C(function(){const l=S();N("New Recipe");const[D,h]=c.useState(),[E,g]=c.useState(),[m,i]=c.useState(!1),[p,o]=c.useState(),x=async a=>{a.preventDefault(),i(!0),o(void 0);const t=new FormData(a.currentTarget).get("name")?.toString();if(!t){o("Recipe must have a name"),i(!1);return}const n=await R({name:t});if(n.ok){const w=await n.json();l(u(w.id))}else o("Something went wrong creating a recipe"),i(!1)},j=async a=>{a.preventDefault(),i(!0),o(void 0);const s=new FormData(a.currentTarget),t=await b(s);if(t.ok){const n=await t.json();l(u(n.id))}else o("Something went wrong importing from an image"),i(!1)};return e.jsx(e.Fragment,{children:e.jsx(y,{children:e.jsx(I,{className:"justify-content-md-center",children:e.jsxs(T,{style:{maxWidth:"540px"},children:[e.jsx("h1",{children:"Create recipe"}),e.jsxs(r,{onSubmit:x,children:[e.jsxs(r.Group,{className:"margin-bottom-8",children:[e.jsx(r.Control,{required:!0,placeholder:"Name",type:"text",name:"name"}),p&&e.jsx(r.Text,{className:"text-danger",children:p})]}),e.jsx(r.Group,{children:e.jsx(d,{className:"width-100",type:"submit",disabled:m,children:m?e.jsx(f,{}):"Create"})})]}),e.jsx("br",{}),e.jsx("h2",{children:"ðŸª„ New! ðŸª„"}),e.jsx("p",{children:"Take a picture of a recipe and CookTime will use AI to import the content for you"}),e.jsxs(r,{onSubmit:j,encType:"multipart/form-data",children:[e.jsx(r.Group,{controlId:"formFile",className:"image-selector margin-bottom-8",children:e.jsx(r.Control,{type:"file",accept:".jpg,.jpeg,.png",multiple:!1,name:"files",onChange:a=>{let s=a.target.files;if(s.length!=1)return;let t=new FileReader;t.readAsDataURL(s.item(0)),t.onload=n=>{h(s.item(0)),g(t.result)}}})}),e.jsx(r.Group,{children:e.jsx(d,{className:"width-100",type:"submit",disabled:m,children:m?e.jsx(f,{}):"Import"})})]})]})})})})});export{W as R,q as a};
