import{R as l,r as o,j as i}from"./chunk-EPOLDU6W-43oXRp_d.js";const r={user:null,signOut:async function(){return(await fetch("/api/auth/signout")).ok},getUserDetails:async function(){const e=await fetch("/api/account/profile");return e.ok?await e.json():null},updateDisplayName:async function(e){const n=await fetch("/api/account/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:e})});return n.ok?{ok:!0}:{ok:!1,message:(await n.json().catch(()=>({message:"Something went wrong"}))).message||"Something went wrong"}}},c=l.createContext(r);function f(){return o.useContext(c)}function g({children:e}){const[n,s]=o.useState(null);o.useEffect(()=>{n==null&&r.getUserDetails().then(t=>{s(t)})},[n]);const a=async()=>{const t=await r.getUserDetails();return s(t),t};return i.jsx(c.Provider,{value:{user:n,signOut:async()=>{const t=await r.signOut();return t&&s(null),t},getUserDetails:a,updateDisplayName:async t=>{const u=await r.updateDisplayName(t);return u.ok&&await a(),u}},children:e})}function h({children:e,roles:n}){let s=f();return!s.user||s.user&&!s.user.roles.find(a=>n.find(t=>t===a))?i.jsx(i.Fragment,{}):e}export{g as A,h as R,c as a,f as u};
